# ========================================
# TCP/NTCP Model Parameters
# Lung Cancer Radiotherapy
# ========================================

# ----------------------------------------
# TCP (Tumor Control Probability)
# ----------------------------------------
# Model: Niemierko (EUD-based)
# Formulas:
#   EUD = ( Σ vᵢ × Dᵢ^a )^(1/a)
#   TCP = 1 / ( 1 + (TCD50 / EUD)^(4×γ₅₀) )
#
# Reference: Niemierko A. (1997). Med Phys 24(1):103-110

tcp:
  ptv:
    a: -10              # Tissue parameter (negative for tumors)
    tcd50_gy: 60.0      # Dose for 50% tumor control probability (Gy)
    gamma50: 2.0        # Slope of dose-response curve
    eqd2_conversion: false
    alpha_beta: 10.0    # For EQD2 conversion (if enabled)

# ----------------------------------------
# NTCP (Normal Tissue Complication Probability)
# ----------------------------------------
# Model: Lyman-Kutcher-Burman (LKB)
# Formulas:
#   Deff = ( Σ vᵢ × Dᵢ^(1/n) )^n
#   t = (Deff - TD50) / (m × TD50)
#   NTCP = Φ(t)   where Φ is cumulative normal distribution
#
# References:
#   Lyman JT. (1985). Radiat Res Suppl 8:S13-19
#   Kutcher GJ, Burman C. (1989). Int J Radiat Oncol Biol Phys 16(6):1623-1630
#   Marks LB et al. (2010). Int J Radiat Oncol Biol Phys 76(3 Suppl):S10-19

ntcp:
  lung:
    n: 0.87                              # Volume parameter (0 = serial, 1 = parallel)
    m: 0.18                              # Slope of dose-response curve
    td50_gy: 24.5                        # Dose for 50% complication probability (Gy)
    endpoint: "pneumonitis grade ≥2"     # Clinical endpoint

  heart:
    n: 0.35
    m: 0.10
    td50_gy: 48.0
    endpoint: "pericarditis"

  esophagus:
    n: 0.69
    m: 0.13
    td50_gy: 68.0
    endpoint: "esophagitis grade ≥3"

  spinal_cord:
    n: 0.05
    m: 0.175
    td50_gy: 50.0
    endpoint: "myelopathy"

# ----------------------------------------
# Structure Mapping
# ----------------------------------------
# Priority order (left to right): first match is used
structure_mapping:
  ptv:
    - "PTV_6600"
    - "PTV_6000"
    - "PTV"
  lung:
    - "LUNG_TOTAL"     # standard total lung for NTCP
    - "LUNGS"
  heart:
    - "HEART"
  esophagus:
    - "ESOPHAGUS"
    - "OESOPHAGUS"
  spinal_cord:
    - "SPINAL_CORD"
    - "CORD"
